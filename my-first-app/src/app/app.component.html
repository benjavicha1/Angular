<div class="mat-background">
  <div class="stepper-container">
    <mat-vertical-stepper linear #surveyStepper>
      <!-- Step 1 -->
      <mat-step [stepControl]="formGroup1">
        <form [formGroup]="formGroup1">
          <ng-template matStepLabel>
            <b>Survey Type:</b> {{ selectedSurveyTypeName }}
          </ng-template>
          <mat-form-field appearance="outline">
            <mat-label>Select a type</mat-label>
            <mat-select
              formControlName="surveyTypeControl"
              required
              [(ngModel)]="selectedSurveyType"
              (selectionChange)="changeClientSurveyType($event.value)"
            >
              <mat-option selected>None</mat-option>
              <mat-option
                *ngFor="let type of surveyTypes; let i = index"
                [value]="i"
              >
                {{ type.name }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="surveyTypeControl.hasError('required')">
              Please choose a type of survey
            </mat-error>
          </mat-form-field>
          <p *ngIf="selectedSurveyTypeDescription">
            <b>*Note:</b> {{ selectedSurveyTypeDescription }}
          </p>
          <div *ngIf="selectedSurveyTypeName">
            <br />
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>

      <!-- Step 2 -->
      <mat-step
        [stepControl]="formGroup2"
        [optional]="true"
        *ngIf="selectedSurveyTypeIsHidden == false"
      >
        <form [formGroup]="formGroup2">
          <ng-template matStepLabel>Configuration Options</ng-template>
          <mat-form-field appearance="outline">
            <mat-label>Configuration(s)</mat-label>
            <mat-select [formControl]="Configurations" multiple>
              <mat-select-trigger>
                {{ Configurations.value ? Configurations.value[0] : "" }}
                <span
                  *ngIf="Configurations.value?.length > 1"
                  class="example-additional-selection"
                >
                  (+{{ Configurations.value.length - 1 }}
                  {{ Configurations.value?.length === 2 ? "other" : "others" }})
                </span>
              </mat-select-trigger>
              <mat-option
                *ngFor="let configuration of configurationList"
                [value]="configuration"
                >{{ configuration }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <p>
            <b>*Note:</b> By default, participants will have access to surveys
            entire project length period on the next day of enrollment day.
          </p>
          <div>
            <br />
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>

      <!-- Step 3: Done -->
      <mat-step *ngIf="showDone">
        <ng-template matStepLabel>Done</ng-template>
        <p>You are now done.</p>
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button
            mat-button
            (click)="changeClientSurveyType(null); surveyStepper.reset()"
          >
            Reset
          </button>
        </div>
      </mat-step>
    </mat-vertical-stepper>
  </div>
</div>
